
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/template/template.xhtml">
<ui:define name="content">
    <ui:fragment rendered="#{saveuserbean.isAdmin()}">
    <h:form class="autoMargin" style="max-width: 400px; margin: auto;">
        <p:panel header="Register user" styleClass="login-panel">
            <p:messages id="messages" autoUpdate="true" closable="true" />
            <p:panelGrid columns="2" style="margin-bottom: 10px;" columnClasses="label, value">
                <h:outputLabel for="FirstName" value= "Firstname: "/>
                <h:inputText id="FirstName" value="#{saveuserbean.firstname}" required="true" label ="Firstname"/>
                <h:outputLabel for="LastName" value="Lastname: "/>
                <h:inputText id="LastName" value="#{saveuserbean.lastname}" required="false" label ="Lastname"/>
                <h:outputLabel for="UserName" value="Username: "/>
                <h:inputText id="UserName" value="#{saveuserbean.username}" required="true" label="Username"/>
                <h:outputLabel for="password1" value="Password:" />
                <p:password id="password1" value="#{saveuserbean.password1}" required="true" label="Password" feedback="true" />
                <h:outputLabel for="password2" value="Confirm:" />
                <p:password id="password2" value="#{saveuserbean.password2}" required="true" label="Password" feedback="true" />
                <h:outputLabel for="Email" value="Email: "/>
                <h:inputText id="Email" value="#{saveuserbean.email}" required="true" label="Email"/>
                <h:outputLabel for="DateOfBirth" value="Birthdate: "/>
                <p:calendar id="DateOfBirth" value="#{saveuserbean.dateOfBirth}" pattern="yyyy-MM-dd" required="true">
                    <f:convertDateTime pattern="yyyy-MM-dd" />
                </p:calendar>
            </p:panelGrid>
            <p:commandButton value="Register" action="#{saveuserbean.saveUser(saveuserbean.firstname,saveuserbean.lastname,saveuserbean.username,saveuserbean.dateOfBirth,saveuserbean.password1,saveuserbean.password2,saveuserbean.email)}" outcome = "/pages/protected/users/users.xhtml" ajax="false" styleClass="ui-button-primary" style="width: 100%;" />
        </p:panel>
    </h:form>
    </ui:fragment>
    <ui:fragment rendered="#{not saveuserbean.isAdmin()}"  >
        <script>
            window.alert("you are not authorized to view this page")
            window.location.href = '/user_registration_app_war_exploded/pages/protected/home/home.xhtml';
        </script>
    </ui:fragment>
</ui:define>
</ui:composition>

